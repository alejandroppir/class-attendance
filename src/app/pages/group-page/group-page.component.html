<section class="row center row-center">
  <section class="column fields w-90">
    <div class="row just-cont-space-around">
      <mat-form-field appearance="fill" class="w-30">
        <mat-label>{{ "GROUP_NAME_LABEL" | translate }}</mat-label>
        <input matInput type="text" [(ngModel)]="groupModel.groupName" />
      </mat-form-field>
    </div>
    <div
      class="row just-cont-space-around flex-wrap days-container w-80 center"
    >
      <!-- Lunes -->
      <ng-container
        *ngTemplateOutlet="
          daySchedule;
          context: { $implicit: 'MONDAY_LABEL', groupModel: groupModel.monday }
        "
      ></ng-container>

      <!-- Martes -->
      <ng-container
        *ngTemplateOutlet="
          daySchedule;
          context: {
            $implicit: 'TUESDAY_LABEL',
            groupModel: groupModel.tuesday
          }
        "
      ></ng-container>

      <!-- Miércoles -->
      <ng-container
        *ngTemplateOutlet="
          daySchedule;
          context: {
            $implicit: 'WEDNESDAY_LABEL',
            groupModel: groupModel.wednesday
          }
        "
      ></ng-container>

      <!-- Jueves -->
      <ng-container
        *ngTemplateOutlet="
          daySchedule;
          context: {
            $implicit: 'THURSDAY_LABEL',
            groupModel: groupModel.thursday
          }
        "
      ></ng-container>

      <!-- Viernes -->
      <ng-container
        *ngTemplateOutlet="
          daySchedule;
          context: { $implicit: 'FRIDAY_LABEL', groupModel: groupModel.friday }
        "
      ></ng-container>

      <!-- Sábado -->
      <ng-container
        *ngTemplateOutlet="
          daySchedule;
          context: {
            $implicit: 'SATURDAY_LABEL',
            groupModel: groupModel.saturday
          }
        "
      ></ng-container>

      <!-- Domingo -->
      <ng-container
        *ngTemplateOutlet="
          daySchedule;
          context: { $implicit: 'SUNDAY_LABEL', groupModel: groupModel.sunday }
        "
      ></ng-container>
    </div>
  </section>
</section>

<section class="row button-row w-80 center">
  <button
    mat-raised-button
    color="primary"
    (click)="clearFields()"
    class="button"
  >
    {{ "CLEAR" | translate }}
  </button>
  <button
    mat-raised-button
    color="primary"
    (click)="saveGroup()"
    class="button"
  >
    {{ "SAVE" | translate }}
  </button>
  <button mat-raised-button color="primary" (click)="log()" class="button">
    {{ "log" | translate }}
  </button>
</section>

<div class="column center w-80 center table">
  <section class="row filter-row">
    <app-text-filter
      (textFilterChange)="textFilterChange($event)"
      class="w-100"
    ></app-text-filter>
  </section>

  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort>
    <!-- Checkbox Column -->
    <ng-container matColumnDef="groupName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ "NOMBRE" | translate }}
      </th>
      <td mat-cell *matCellDef="let element">
        {{ element.groupName }}
      </td>
    </ng-container>

    <ng-container matColumnDef="monday">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ "MONDAY_LABEL" | translate }}
      </th>
      <td mat-cell *matCellDef="let element">
        {{ element.monday.initHour + "-" + element.monday.endHour }}
      </td>
    </ng-container>
    <ng-container matColumnDef="tuesday">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ "TUESDAY_LABEL" | translate }}
      </th>
      <td mat-cell *matCellDef="let element">
        {{ element.tuesday.initHour + "-" + element.tuesday.endHour }}
      </td>
    </ng-container>
    <ng-container matColumnDef="wednesday">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ "WEDNESDAY_LABEL" | translate }}
      </th>
      <td mat-cell *matCellDef="let element">
        {{ element.wednesday.initHour + "-" + element.wednesday.endHour }}
      </td>
    </ng-container>
    <ng-container matColumnDef="thursday">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ "THURSDAY_LABEL" | translate }}
      </th>
      <td mat-cell *matCellDef="let element">
        {{ element.thursday.initHour + "-" + element.thursday.endHour }}
      </td>
    </ng-container>
    <ng-container matColumnDef="friday">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ "FRIDAY_LABEL" | translate }}
      </th>
      <td mat-cell *matCellDef="let element">
        {{ element.friday.initHour + "-" + element.friday.endHour }}
      </td>
    </ng-container>
    <ng-container matColumnDef="saturday">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ "SATURDAY_LABEL" | translate }}
      </th>
      <td mat-cell *matCellDef="let element">
        {{ element.saturday.initHour + "-" + element.saturday.endHour }}
      </td>
    </ng-container>
    <ng-container matColumnDef="sunday">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        {{ "SUNDAY_LABEL" | translate }}
      </th>
      <td mat-cell *matCellDef="let element">
        {{ element.sunday.initHour + "-" + element.sunday.endHour }}
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="4">
        {{ "NO_DATA_FILTER" | translate }} "{{ getFiltersNoMatch() }}"
      </td>
    </tr>
  </table>

  <mat-paginator
    [pageSizeOptions]="paginatorSize"
    aria-label="Select page of users"
  ></mat-paginator>
</div>

<ng-template #daySchedule let-dayLabel let-dayConfig="groupModel">
  <mat-card class="center">
    <mat-card-title>{{ dayLabel | translate }}</mat-card-title>
    <mat-card-content>
      <div class="row just-cont-space-around flex-al-it-center g-4">
        <mat-form-field appearance="fill" style="width: 5em">
          <input
            matInput
            type="number"
            [ngModel]="dayConfig.initHour"
            (ngModelChange)="dayConfig.initHour = $event"
            (change)="updateEndHour(dayConfig)"
            min="0"
            max="24"
            step="0.5"
          />
        </mat-form-field>
        -
        <mat-form-field appearance="fill" style="width: 5em">
          <input
            matInput
            type="number"
            [ngModel]="dayConfig.endHour"
            (ngModelChange)="dayConfig.endHour = $event"
            (change)="updateStartHour(dayConfig)"
            min="0"
            max="24"
            step="0.5"
          />
        </mat-form-field>
      </div>
    </mat-card-content>
  </mat-card>
</ng-template>
